{% extends "base.html" %}
{% block content %}

<div class="container">
    <div class="row">

        {% for blog_post in blog_posts %}
        <div class="col s12 m6 l4">
            <div class="card medium">
                <div class="card-image waves-effect waves-block waves-light">
                    <img src='{{ blog_post.image_url }}'>
                </div>
                <div class="card-content">
                    <span class="card-title grey-text text-darken-4">
                        {% if blog_post.is_new == "on" %}
                        <i class="fa-solid fa-circle-exclamation tooltipped green-text text-darken-3" data-position="left"
                            data-tooltip="NEW POST!"></i>
                        {% endif %}
                        <strong> {{ blog_post.headline }}</strong></span>
                    <h6 class="black-text activator"><em>Category: {{ blog_post.category_name }}</em>
                        <i class="fa-solid fa-ellipsis-vertical right"></i>
                    </h6>
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4"><strong>{{ blog_post.headline }}</strong><i
                            class="fa-solid fa-xmark right"></i></span>
                    <br>
                    <p class="black-text">{{ blog_post.intro }}</p>
                    <br>
                    <p><a href="{{ url_for('read_post', blog_post_id=blog_post._id) }}" class="white-text">Read more...</a></p>
                </div>
            </div>
            {% if session.user == "admin" %}    
            <div class="center-align">   
                <a href="{{ url_for('edit_blog_post', blog_post_id=blog_post._id) }}" aria-label="It opens Edit Blog Post page">
                    <button class="btn waves-effect waves-light btn-medium btn-green" type="submit">
                        <i class="fa-solid fa-file-pen"></i> EDIT</button>
                </a>
                <a href="{{ url_for('delete_blog_post', blog_post_id=blog_post._id) }}" aria-label="It opens Delete Blog Post page">
                    <button class="btn waves-effect waves-light btn-medium btn-red" type="submit">
                        <i class="fa-solid fa-xmark"></i> DELETE</button>
                </a>  
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

{% if session.user == "admin" %}
<div class="center-align">
    <a href="{{ url_for('add_blog_post')}}" aria-label="It opens Add Blog Post page">
        <button class="btn waves-effect waves-light btn-large btn-mocha" type="submit">
            <i class="fa-solid fa-plus"></i> Add New Blog Post</button>
    </a>
</div>
{% endif %}

{% endblock %}